import{c as $,i as N,f as Q,z as M,e as d,j as v,A as j,k as L,l as V,B as A,r as y,w as z,o as W,T as K,C as B,D,E as I,G as U,H as G,I as J,J as _,g as X,K as H,L as T,M as Y,h as Z}from"./index.757f950f.js";import{u as ee,a as te,Q as E}from"./QResizeObserver.d4fbc71d.js";var re=$({name:"QPageContainer",setup(e,{slots:p}){const{proxy:{$q:i}}=L(),n=N(V,Q);if(n===Q)return console.error("QPageContainer needs to be child of QLayout"),Q;M(A,!0);const o=d(()=>{const r={};return n.header.space===!0&&(r.paddingTop=`${n.header.size}px`),n.right.space===!0&&(r[`padding${i.lang.rtl===!0?"Left":"Right"}`]=`${n.right.size}px`),n.footer.space===!0&&(r.paddingBottom=`${n.footer.size}px`),n.left.space===!0&&(r[`padding${i.lang.rtl===!0?"Right":"Left"}`]=`${n.left.size}px`),r});return()=>v("div",{class:"q-page-container",style:o.value},j(p.default))}}),ae=$({name:"QPageScroller",props:{...ee,scrollOffset:{type:Number,default:1e3},reverse:Boolean,duration:{type:Number,default:300},offset:{default:()=>[18,18]}},emits:["click"],setup(e,{slots:p,emit:i}){const{proxy:{$q:n}}=L(),{$layout:o,getStickyContent:r}=te(),c=y(null);let u;const f=d(()=>o.height.value-(o.isContainer.value===!0?o.containerHeight.value:n.screen.height));function l(){return e.reverse===!0?f.value-o.scroll.value.position>e.scrollOffset:o.scroll.value.position>e.scrollOffset}const g=y(l());function h(){const w=l();g.value!==w&&(g.value=w)}function m(){e.reverse===!0?u===void 0&&(u=z(f,h)):s()}z(o.scroll,h),z(()=>e.reverse,m);function s(){u!==void 0&&(u(),u=void 0)}function S(w){const P=B(o.isContainer.value===!0?c.value:o.rootRef.value);D(P,e.reverse===!0?o.height.value:0,e.duration),i("click",w)}function R(){return g.value===!0?v("div",{ref:c,class:"q-page-scroller",onClick:S},r(p)):null}return m(),W(s),()=>v(K,{name:"q-transition--fade"},R)}});const{passive:F}=G,ne=["both","horizontal","vertical"];var oe=$({name:"QScrollObserver",props:{axis:{type:String,validator:e=>ne.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(e,{emit:p}){const i={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let n=null,o,r;z(()=>e.scrollTarget,()=>{f(),u()});function c(){n!==null&&n();const h=Math.max(0,J(o)),m=_(o),s={top:h-i.position.top,left:m-i.position.left};if(e.axis==="vertical"&&s.top===0||e.axis==="horizontal"&&s.left===0)return;const S=Math.abs(s.top)>=Math.abs(s.left)?s.top<0?"up":"down":s.left<0?"left":"right";i.position={top:h,left:m},i.directionChanged=i.direction!==S,i.delta=s,i.directionChanged===!0&&(i.direction=S,i.inflectionPoint=i.position),p("scroll",{...i})}function u(){o=B(r,e.scrollTarget),o.addEventListener("scroll",l,F),l(!0)}function f(){o!==void 0&&(o.removeEventListener("scroll",l,F),o=void 0)}function l(h){if(h===!0||e.debounce===0||e.debounce==="0")c();else if(n===null){const[m,s]=e.debounce?[setTimeout(c,e.debounce),clearTimeout]:[requestAnimationFrame(c),cancelAnimationFrame];n=()=>{s(m),n=null}}}const{proxy:g}=L();return z(()=>g.$q.lang.rtl,c),I(()=>{r=g.$el.parentNode,u()}),W(()=>{n!==null&&n(),f()}),Object.assign(g,{trigger:l,getPosition:()=>i}),U}}),se=$({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:p,emit:i}){const{proxy:{$q:n}}=L(),o=y(null),r=y(n.screen.height),c=y(e.container===!0?0:n.screen.width),u=y({position:0,direction:"down",inflectionPoint:0}),f=y(0),l=y(X.value===!0?0:H()),g=d(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),h=d(()=>e.container===!1?{minHeight:n.screen.height+"px"}:null),m=d(()=>l.value!==0?{[n.lang.rtl===!0?"left":"right"]:`${l.value}px`}:null),s=d(()=>l.value!==0?{[n.lang.rtl===!0?"right":"left"]:0,[n.lang.rtl===!0?"left":"right"]:`-${l.value}px`,width:`calc(100% + ${l.value}px)`}:null);function S(t){if(e.container===!0||document.qScrollPrevented!==!0){const a={position:t.position.top,direction:t.direction,directionChanged:t.directionChanged,inflectionPoint:t.inflectionPoint.top,delta:t.delta.top};u.value=a,e.onScroll!==void 0&&i("scroll",a)}}function R(t){const{height:a,width:b}=t;let C=!1;r.value!==a&&(C=!0,r.value=a,e.onScrollHeight!==void 0&&i("scrollHeight",a),P()),c.value!==b&&(C=!0,c.value=b),C===!0&&e.onResize!==void 0&&i("resize",t)}function w({height:t}){f.value!==t&&(f.value=t,P())}function P(){if(e.container===!0){const t=r.value>f.value?H():0;l.value!==t&&(l.value=t)}}let x=null;const O={instances:{},view:d(()=>e.view),isContainer:d(()=>e.container),rootRef:o,height:r,containerHeight:f,scrollbarWidth:l,totalWidth:d(()=>c.value+l.value),rows:d(()=>{const t=e.view.toLowerCase().split(" ");return{top:t[0].split(""),middle:t[1].split(""),bottom:t[2].split("")}}),header:T({size:0,offset:0,space:!1}),right:T({size:300,offset:0,space:!1}),footer:T({size:0,offset:0,space:!1}),left:T({size:300,offset:0,space:!1}),scroll:u,animate(){x!==null?clearTimeout(x):document.body.classList.add("q-body--layout-animate"),x=setTimeout(()=>{x=null,document.body.classList.remove("q-body--layout-animate")},155)},update(t,a,b){O[t][a]=b}};if(M(V,O),H()>0){let b=function(){t=null,a.classList.remove("hide-scrollbar")},C=function(){if(t===null){if(a.scrollHeight>n.screen.height)return;a.classList.add("hide-scrollbar")}else clearTimeout(t);t=setTimeout(b,300)},q=function(k){t!==null&&k==="remove"&&(clearTimeout(t),b()),window[`${k}EventListener`]("resize",C)},t=null;const a=document.body;z(()=>e.container!==!0?"add":"remove",q),e.container!==!0&&q("add"),Y(()=>{q("remove")})}return()=>{const t=Z(p.default,[v(oe,{onScroll:S}),v(E,{onResize:R})]),a=v("div",{class:g.value,style:h.value,ref:e.container===!0?void 0:o,tabindex:-1},t);return e.container===!0?v("div",{class:"q-layout-container overflow-hidden",ref:o},[v(E,{onResize:w}),v("div",{class:"absolute-full",style:m.value},[v("div",{class:"scroll",style:s.value},[a])])]):a}}});export{se as Q,re as a,ae as b};
