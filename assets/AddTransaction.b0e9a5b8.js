import{a as ue,c as we,b5 as Ie,b6 as nt,b7 as at,b8 as ot,a9 as Tt,b9 as Qt,aa as Mt,ba as Ht,e as r,b4 as Rt,k as it,j as m,V as te,bb as Nt,R as Ut,P as H,al as _t,r as x,bc as zt,bd as et,w as ee,W as J,a1 as M,be as Kt,bf as jt,o as Et,ah as Se,bg as Yt,ai as Y,S as Wt,U as Xt,az as rt,h as Gt,m as Jt,_ as Zt,q as eu,s as tu,t as I,v as V,av as ie,a4 as tt,Q as Ce,au as uu,ay as re,O as lu,bh as Ve,a5 as ke,at as nu}from"./index.757f950f.js";import{f as au,Q as ou,a as iu,b as ru,d as su,C as du}from"./ClosePopup.13d91716.js";import{Q as cu}from"./QItem.1baa897c.js";import{u as fu,a as vu,n as ut,e as mu,h as gu,Q as bu,i as yu}from"./QForm.c5e622cc.js";import{u as hu}from"./use-quasar.23119b98.js";import{D as Z}from"./decimal.cf065309.js";import{s as Su}from"./transaction.804e5840.js";function Tu(e){return ue.get(`/stocks/${e}`)}function Qu(e){return ue.get(`/users/${e}/stocks`)}function Mu(e){return ue.post("/stocks",e)}function Hu(e){return ue.delete(`/stocks/${e}`)}function Ru(e){return ue.post(`/stocks/${e}/refresh`,e)}var Cu=we({name:"QField",inheritAttrs:!1,props:Ie,emits:nt,setup(){return at(ot())}});const Vu={xs:8,sm:10,md:14,lg:20,xl:24};var se=we({name:"QChip",props:{...Tt,...Qt,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:a,emit:s}){const{proxy:{$q:D}}=it(),g=Mt(e,D),d=Ht(e,Vu),i=r(()=>e.selected===!0||e.icon!==void 0),b=r(()=>e.selected===!0?e.iconSelected||D.iconSet.chip.selected:e.icon),h=r(()=>e.iconRemove||D.iconSet.chip.remove),C=r(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),B=r(()=>{const f=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(f?` text-${f} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(C.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(g.value===!0?" q-chip--dark q-dark":"")}),w=r(()=>{const f=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},R={...f,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||D.lang.label.remove};return{chip:f,remove:R}});function W(f){f.keyCode===13&&q(f)}function q(f){e.disable||(s("update:selected",!e.selected),s("click",f))}function $(f){(f.keyCode===void 0||f.keyCode===13)&&(H(f),e.disable===!1&&(s("update:modelValue",!1),s("remove")))}function O(){const f=[];C.value===!0&&f.push(m("div",{class:"q-focus-helper"})),i.value===!0&&f.push(m(te,{class:"q-chip__icon q-chip__icon--left",name:b.value}));const R=e.label!==void 0?[m("div",{class:"ellipsis"},[e.label])]:void 0;return f.push(m("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Nt(a.default,R))),e.iconRight&&f.push(m(te,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&f.push(m(te,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:h.value,...w.value.remove,onClick:$,onKeyup:$})),f}return()=>{if(e.modelValue===!1)return;const f={class:B.value,style:d.value};return C.value===!0&&Object.assign(f,w.value.chip,{onClick:q,onKeyup:W}),Rt("div",f,O(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Ut,e.ripple]])}}});const lt=e=>["add","add-unique","toggle"].includes(e),ku=".*+?^${}()|[]\\",wu=Object.keys(Ie);var Iu=we({name:"QSelect",inheritAttrs:!1,props:{...fu,..._t,...Ie,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:lt},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...nt,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:a,emit:s}){const{proxy:D}=it(),{$q:g}=D,d=x(!1),i=x(!1),b=x(-1),h=x(""),C=x(!1),B=x(!1);let w=null,W,q,$,O=null,f,R,P,pe;const st=x(null),k=x(null),N=x(null),de=x(null),qe=x(null),De=zt(e),Ae=Yt(We),L=r(()=>Array.isArray(e.options)?e.options.length:0),dt=r(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:ct,virtualScrollSliceSizeComputed:Oe,localResetVirtualScroll:ce,padVirtualScroll:ft,onVirtualScrollEvt:xe,scrollTo:Be,setVirtualScrollSize:Fe}=vu({virtualScrollLength:L,getVirtualScrollTarget:wt,getVirtualScrollEl:Ee,virtualScrollItemSizeComputed:dt}),n=ot(),S=r(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,l=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const u=e.mapOptions===!0&&W!==void 0?W:[],o=l.map(v=>kt(v,u));return e.modelValue===null&&t===!0?o.filter(v=>v!==null):o}return l}),vt=r(()=>{const t={};return wu.forEach(l=>{const u=e[l];u!==void 0&&(t[l]=u)}),t}),le=r(()=>e.optionsDark===null?n.isDark.value:e.optionsDark),fe=r(()=>et(S.value)),mt=r(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||S.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),Pe=r(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),X=r(()=>L.value===0),Le=r(()=>S.value.map(t=>A.value(t)).join(", ")),$e=r(()=>e.displayValue!==void 0?e.displayValue:Le.value),ve=r(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),gt=r(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||S.value.some(ve.value))),Te=r(()=>n.focused.value===!0?e.tabindex:-1),Qe=r(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":d.value===!0?"true":"false","aria-controls":`${n.targetUid.value}_lb`};return b.value>=0&&(t["aria-activedescendant"]=`${n.targetUid.value}_${b.value}`),t}),Me=r(()=>({id:`${n.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),He=r(()=>S.value.map((t,l)=>({index:l,opt:t,html:ve.value(t),selected:!0,removeAtIndex:Vt,toggleOption:T,tabindex:Te.value}))),bt=r(()=>{if(L.value===0)return[];const{from:t,to:l}=ct.value;return e.options.slice(t,l).map((u,o)=>{const v=U.value(u)===!0,c=t+o,y={clickable:!0,active:!1,activeClass:St.value,manualFocus:!0,focused:!1,disable:v,tabindex:-1,dense:e.optionsDense,dark:le.value,role:"option",id:`${n.targetUid.value}_${c}`,onClick:()=>{T(u)}};return v!==!0&&(be(u)===!0&&(y.active=!0),b.value===c&&(y.focused=!0),y["aria-selected"]=y.active===!0?"true":"false",g.platform.is.desktop===!0&&(y.onMousemove=()=>{d.value===!0&&_(c)})),{index:c,opt:u,html:ve.value(u),label:A.value(u),selected:y.active,focused:y.focused,toggleOption:T,setOptionIndex:_,itemProps:y}})}),yt=r(()=>e.dropdownIcon!==void 0?e.dropdownIcon:g.iconSet.arrow.dropdown),ht=r(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),St=r(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),F=r(()=>ge(e.optionValue,"value")),A=r(()=>ge(e.optionLabel,"label")),U=r(()=>ge(e.optionDisable,"disable")),ne=r(()=>S.value.map(t=>F.value(t))),Ct=r(()=>{const t={onInput:We,onChange:Ae,onKeydown:je,onKeyup:ze,onKeypress:Ke,onFocus:Ue,onClick(l){q===!0&&Y(l)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=Ae,t});ee(S,t=>{W=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&n.innerLoading.value!==!0&&(i.value!==!0&&d.value!==!0||fe.value!==!0)&&($!==!0&&E(),(i.value===!0||d.value===!0)&&z(""))},{immediate:!0}),ee(()=>e.fillInput,E),ee(d,ye),ee(L,$t);function Re(t){return e.emitValue===!0?F.value(t):t}function me(t){if(t>-1&&t<S.value.length)if(e.multiple===!0){const l=e.modelValue.slice();s("remove",{index:t,value:l.splice(t,1)[0]}),s("update:modelValue",l)}else s("update:modelValue",null)}function Vt(t){me(t),n.focus()}function Ne(t,l){const u=Re(t);if(e.multiple!==!0){e.fillInput===!0&&G(A.value(t),!0,!0),s("update:modelValue",u);return}if(S.value.length===0){s("add",{index:0,value:u}),s("update:modelValue",e.multiple===!0?[u]:u);return}if(l===!0&&be(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const o=e.modelValue.slice();s("add",{index:o.length,value:u}),o.push(u),s("update:modelValue",o)}function T(t,l){if(n.editable.value!==!0||t===void 0||U.value(t)===!0)return;const u=F.value(t);if(e.multiple!==!0){l!==!0&&(G(e.fillInput===!0?A.value(t):"",!0,!0),Q()),k.value!==null&&k.value.focus(),(S.value.length===0||J(F.value(S.value[0]),u)!==!0)&&s("update:modelValue",e.emitValue===!0?u:t);return}if((q!==!0||C.value===!0)&&n.focus(),Ue(),S.value.length===0){const c=e.emitValue===!0?u:t;s("add",{index:0,value:c}),s("update:modelValue",e.multiple===!0?[c]:c);return}const o=e.modelValue.slice(),v=ne.value.findIndex(c=>J(c,u));if(v>-1)s("remove",{index:v,value:o.splice(v,1)[0]});else{if(e.maxValues!==void 0&&o.length>=e.maxValues)return;const c=e.emitValue===!0?u:t;s("add",{index:o.length,value:c}),o.push(c)}s("update:modelValue",o)}function _(t){if(g.platform.is.desktop!==!0)return;const l=t>-1&&t<L.value?t:-1;b.value!==l&&(b.value=l)}function ae(t=1,l){if(d.value===!0){let u=b.value;do u=ut(u+t,-1,L.value-1);while(u!==-1&&u!==b.value&&U.value(e.options[u])===!0);b.value!==u&&(_(u),Be(u),l!==!0&&e.useInput===!0&&e.fillInput===!0&&oe(u>=0?A.value(e.options[u]):f))}}function kt(t,l){const u=o=>J(F.value(o),t);return e.options.find(u)||l.find(u)||t}function ge(t,l){const u=t!==void 0?t:l;return typeof u=="function"?u:o=>o!==null&&typeof o=="object"&&u in o?o[u]:o}function be(t){const l=F.value(t);return ne.value.find(u=>J(u,l))!==void 0}function Ue(t){e.useInput===!0&&k.value!==null&&(t===void 0||k.value===t.target&&t.target.value===Le.value)&&k.value.select()}function _e(t){Wt(t,27)===!0&&d.value===!0&&(Y(t),Q(),E()),s("keyup",t)}function ze(t){const{value:l}=t.target;if(t.keyCode!==void 0){_e(t);return}if(t.target.value="",w!==null&&(clearTimeout(w),w=null),E(),typeof l=="string"&&l.length>0){const u=l.toLocaleLowerCase(),o=c=>{const y=e.options.find(p=>c.value(p).toLocaleLowerCase()===u);return y===void 0?!1:(S.value.indexOf(y)===-1?T(y):Q(),!0)},v=c=>{o(F)!==!0&&(o(A)===!0||c===!0||z(l,!0,()=>v(!0)))};v()}else n.clearValue(t)}function Ke(t){s("keypress",t)}function je(t){if(s("keydown",t),Xt(t)===!0)return;const l=h.value.length>0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),u=t.shiftKey!==!0&&e.multiple!==!0&&(b.value>-1||l===!0);if(t.keyCode===27){Se(t);return}if(t.keyCode===9&&u===!1){K();return}if(t.target===void 0||t.target.id!==n.targetUid.value)return;if(t.keyCode===40&&n.innerLoading.value!==!0&&d.value===!1){H(t),j();return}if(t.keyCode===8&&e.hideSelected!==!0&&h.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?me(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&s("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof h.value!="string"||h.value.length===0)&&(H(t),b.value=-1,ae(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&Oe.value!==void 0&&(H(t),b.value=Math.max(-1,Math.min(L.value,b.value+(t.keyCode===33?-1:1)*Oe.value.view)),ae(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(H(t),ae(t.keyCode===38?-1:1,e.multiple));const o=L.value;if((P===void 0||pe<Date.now())&&(P=""),o>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||P.length>0)){d.value!==!0&&j(t);const v=t.key.toLocaleLowerCase(),c=P.length===1&&P[0]===v;pe=Date.now()+1500,c===!1&&(H(t),P+=v);const y=new RegExp("^"+P.split("").map(he=>ku.indexOf(he)>-1?"\\"+he:he).join(".*"),"i");let p=b.value;if(c===!0||p<0||y.test(A.value(e.options[p]))!==!0)do p=ut(p+1,-1,o-1);while(p!==b.value&&(U.value(e.options[p])===!0||y.test(A.value(e.options[p]))!==!0));b.value!==p&&M(()=>{_(p),Be(p),p>=0&&e.useInput===!0&&e.fillInput===!0&&oe(A.value(e.options[p]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||P!=="")&&(t.keyCode!==9||u===!1))){if(t.keyCode!==9&&H(t),b.value>-1&&b.value<o){T(e.options[b.value]);return}if(l===!0){const v=(c,y)=>{if(y){if(lt(y)!==!0)return}else y=e.newValueMode;if(c==null)return;G("",e.multiple!==!0,!0),(y==="toggle"?T:Ne)(c,y==="add-unique"),e.multiple!==!0&&(k.value!==null&&k.value.focus(),Q())};if(e.onNewValue!==void 0?s("newValue",h.value,v):v(h.value),e.multiple!==!0)return}d.value===!0?K():n.innerLoading.value!==!0&&j()}}function Ee(){return q===!0?qe.value:N.value!==null&&N.value.contentEl!==null?N.value.contentEl:void 0}function wt(){return Ee()}function It(){return e.hideSelected===!0?[]:a["selected-item"]!==void 0?He.value.map(t=>a["selected-item"](t)).slice():a.selected!==void 0?[].concat(a.selected()):e.useChips===!0?He.value.map((t,l)=>m(se,{key:"option-"+l,removable:n.editable.value===!0&&U.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:Te.value,onRemove(){t.removeAtIndex(l)}},()=>m("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:A.value(t.opt)}))):[m("span",{[gt.value===!0?"innerHTML":"textContent"]:$e.value})]}function Ye(){if(X.value===!0)return a["no-option"]!==void 0?a["no-option"]({inputValue:h.value}):void 0;const t=a.option!==void 0?a.option:u=>m(cu,{key:u.index,...u.itemProps},()=>m(ou,()=>m(iu,()=>m("span",{[u.html===!0?"innerHTML":"textContent"]:u.label}))));let l=ft("div",bt.value.map(t));return a["before-options"]!==void 0&&(l=a["before-options"]().concat(l)),Gt(a["after-options"],l)}function pt(t,l){const u=l===!0?{...Qe.value,...n.splitAttrs.attributes.value}:void 0,o={ref:l===!0?k:void 0,key:"i_t",class:mt.value,style:e.inputStyle,value:h.value!==void 0?h.value:"",type:"search",...u,id:l===!0?n.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Ct.value};return t!==!0&&q===!0&&(Array.isArray(o.class)===!0?o.class=[...o.class,"no-pointer-events"]:o.class+=" no-pointer-events"),m("input",o)}function We(t){w!==null&&(clearTimeout(w),w=null),!(t&&t.target&&t.target.qComposing===!0)&&(oe(t.target.value||""),$=!0,f=h.value,n.focused.value!==!0&&(q!==!0||C.value===!0)&&n.focus(),e.onFilter!==void 0&&(w=setTimeout(()=>{w=null,z(h.value)},e.inputDebounce)))}function oe(t){h.value!==t&&(h.value=t,s("inputValue",t))}function G(t,l,u){$=u!==!0,e.useInput===!0&&(oe(t),(l===!0||u!==!0)&&(f=t),l!==!0&&z(t))}function z(t,l,u){if(e.onFilter===void 0||l!==!0&&n.focused.value!==!0)return;n.innerLoading.value===!0?s("filterAbort"):(n.innerLoading.value=!0,B.value=!0),t!==""&&e.multiple!==!0&&S.value.length>0&&$!==!0&&t===A.value(S.value[0])&&(t="");const o=setTimeout(()=>{d.value===!0&&(d.value=!1)},10);O!==null&&clearTimeout(O),O=o,s("filter",t,(v,c)=>{(l===!0||n.focused.value===!0)&&O===o&&(clearTimeout(O),typeof v=="function"&&v(),B.value=!1,M(()=>{n.innerLoading.value=!1,n.editable.value===!0&&(l===!0?d.value===!0&&Q():d.value===!0?ye(!0):d.value=!0),typeof c=="function"&&M(()=>{c(D)}),typeof u=="function"&&M(()=>{u(D)})}))},()=>{n.focused.value===!0&&O===o&&(clearTimeout(O),n.innerLoading.value=!1,B.value=!1),d.value===!0&&(d.value=!1)})}function qt(){return m(au,{ref:N,class:Pe.value,style:e.popupContentStyle,modelValue:d.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&X.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:le.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:ht.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Me.value,onScrollPassive:xe,onBeforeShow:Ge,onBeforeHide:Dt,onShow:At},Ye)}function Dt(t){Je(t),K()}function At(){Fe()}function Ot(t){Y(t),k.value!==null&&k.value.focus(),C.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function xt(t){Y(t),M(()=>{C.value=!1})}function Bt(){const t=[m(Cu,{class:`col-auto ${n.fieldClass.value}`,...vt.value,for:n.targetUid.value,dark:le.value,square:!0,loading:B.value,itemAligned:!1,filled:!0,stackLabel:h.value.length>0,...n.splitAttrs.listeners.value,onFocus:Ot,onBlur:xt},{...a,rawControl:()=>n.getControl(!0),before:void 0,after:void 0})];return d.value===!0&&t.push(m("div",{ref:qe,class:Pe.value+" scroll",style:e.popupContentStyle,...Me.value,onClick:Se,onScrollPassive:xe},Ye())),m(rt,{ref:de,modelValue:i.value,position:e.useInput===!0?"top":void 0,transitionShow:R,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:Ge,onBeforeHide:Ft,onHide:Pt,onShow:Lt},()=>m("div",{class:"q-select__dialog"+(le.value===!0?" q-select__dialog--dark q-dark":"")+(C.value===!0?" q-select__dialog--focused":"")},t))}function Ft(t){Je(t),de.value!==null&&de.value.__updateRefocusTarget(n.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),n.focused.value=!1}function Pt(t){Q(),n.focused.value===!1&&s("blur",t),E()}function Lt(){const t=document.activeElement;(t===null||t.id!==n.targetUid.value)&&k.value!==null&&k.value!==t&&k.value.focus(),Fe()}function K(){i.value!==!0&&(b.value=-1,d.value===!0&&(d.value=!1),n.focused.value===!1&&(O!==null&&(clearTimeout(O),O=null),n.innerLoading.value===!0&&(s("filterAbort"),n.innerLoading.value=!1,B.value=!1)))}function j(t){n.editable.value===!0&&(q===!0?(n.onControlFocusin(t),i.value=!0,M(()=>{n.focus()})):n.focus(),e.onFilter!==void 0?z(h.value):(X.value!==!0||a["no-option"]!==void 0)&&(d.value=!0))}function Q(){i.value=!1,K()}function E(){e.useInput===!0&&G(e.multiple!==!0&&e.fillInput===!0&&S.value.length>0&&A.value(S.value[0])||"",!0,!0)}function ye(t){let l=-1;if(t===!0){if(S.value.length>0){const u=F.value(S.value[0]);l=e.options.findIndex(o=>J(F.value(o),u))}ce(l)}_(l)}function $t(t,l){d.value===!0&&n.innerLoading.value===!1&&(ce(-1,!0),M(()=>{d.value===!0&&n.innerLoading.value===!1&&(t>l?ce():ye(!0))}))}function Xe(){i.value===!1&&N.value!==null&&N.value.updatePosition()}function Ge(t){t!==void 0&&Y(t),s("popupShow",t),n.hasPopupOpen=!0,n.onControlFocusin(t)}function Je(t){t!==void 0&&Y(t),s("popupHide",t),n.hasPopupOpen=!1,n.onControlFocusout(t)}function Ze(){q=g.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?a["no-option"]!==void 0||e.onFilter!==void 0||X.value===!1:!0),R=g.platform.is.ios===!0&&q===!0&&e.useInput===!0?"fade":e.transitionShow}return Kt(Ze),jt(Xe),Ze(),Et(()=>{w!==null&&clearTimeout(w)}),Object.assign(D,{showPopup:j,hidePopup:Q,removeAtIndex:me,add:Ne,toggleOption:T,getOptionIndex:()=>b.value,setOptionIndex:_,moveOptionSelection:ae,filter:z,updateMenuPosition:Xe,updateInputValue:G,isOptionSelected:be,getEmittingOptionValue:Re,isOptionDisabled:(...t)=>U.value.apply(null,t)===!0,getOptionValue:(...t)=>F.value.apply(null,t),getOptionLabel:(...t)=>A.value.apply(null,t)}),Object.assign(n,{innerValue:S,fieldClass:r(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:st,targetRef:k,hasValue:fe,showPopup:j,floatingLabel:r(()=>e.hideSelected!==!0&&fe.value===!0||typeof h.value=="number"||h.value.length>0||et(e.displayValue)),getControlChild:()=>{if(n.editable.value!==!1&&(i.value===!0||X.value!==!0||a["no-option"]!==void 0))return q===!0?Bt():qt();n.hasPopupOpen===!0&&(n.hasPopupOpen=!1)},controlEvents:{onFocusin(t){n.onControlFocusin(t)},onFocusout(t){n.onControlFocusout(t,()=>{E(),K()})},onClick(t){if(Se(t),q!==!0&&d.value===!0){K(),k.value!==null&&k.value.focus();return}j(t)}},getControl:t=>{const l=It(),u=t===!0||i.value!==!0||q!==!0;if(e.useInput===!0)l.push(pt(t,u));else if(n.editable.value===!0){const v=u===!0?Qe.value:void 0;l.push(m("input",{ref:u===!0?k:void 0,key:"d_t",class:"q-select__focus-target",id:u===!0?n.targetUid.value:void 0,value:$e.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...v,onKeydown:je,onKeyup:_e,onKeypress:Ke})),u===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length>0&&l.push(m("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:ze}))}if(De.value!==void 0&&e.disable!==!0&&ne.value.length>0){const v=ne.value.map(c=>m("option",{value:c,selected:!0}));l.push(m("select",{class:"hidden",name:De.value,multiple:e.multiple},v))}const o=e.useInput===!0||u!==!0?void 0:n.splitAttrs.attributes.value;return m("div",{class:"q-field__native row items-center",...o,...n.splitAttrs.listeners.value},l)},getInnerAppend:()=>e.loading!==!0&&B.value!==!0&&e.hideDropdownIcon!==!0?[m(te,{class:"q-select__dropdown-icon"+(d.value===!0?" rotate-180":""),name:yt.value})]:null}),at(n)}});const pu=Jt({name:"AddTransaction",props:{show:{type:Boolean,required:!0},data:{type:Object,required:!0}},emits:["update:show","confirm"],setup(e,a){const s=hu(),D={id:void 0,date:void 0,price:void 0,quantity:void 0,amount:void 0,direction:1,stockId:void 0,userId:void 0},g=x({...D}),d=r(()=>!g.value.amount||!g.value.quantity?0:new Z(g.value.amount).div(g.value.quantity).toDP(2,Z.ROUND_DOWN)),i=r(()=>!g.value.amount||!g.value.price?0:new Z(g.value.amount).divToInt(g.value.price).toNumber()),b=r(()=>!g.value.price||!g.value.quantity?0:new Z(g.value.price).mul(g.value.quantity).toDP(2,Z.ROUND_DOWN));return ee(()=>e.data,C=>{g.value={...D,date:mu.formatDate(new Date,"YYYY-MM-DD"),...C}}),{formData:g,referencePrice:d,referenceQuantity:i,referenceAmount:b,onSubmit:()=>{const C={...g.value};C.price=C.price||0,C.quantity=C.quantity||0,C.amount=C.amount||0,Su(C).then(()=>{a.emit("confirm"),a.emit("update:show",!1)}).catch(B=>{var w;s.notify({message:((w=B.response)==null?void 0:w.data)||B.message||"\u4FDD\u5B58\u5931\u8D25",color:"warning"})})}}}}),qu={class:"flex items-center justiry-end q-gutter-md"},Du={class:"row items-center justify-end"};function Au(e,a,s,D,g,d){return eu(),tu(rt,{"model-value":e.show,persistent:""},{default:I(()=>[V(nu,{style:{width:"700px","max-width":"80vw"}},{default:I(()=>[V(ru,{class:"shadow-2"},{default:I(()=>[V(su,null,{default:I(()=>[ie("\u65B0\u589E\u4EA4\u6613")]),_:1}),tt("div",qu,[V(Ce,{label:"\u5173\u95ED",onClick:a[0]||(a[0]=i=>e.$emit("update:show",!1))}),V(Ce,{color:"primary",label:"\u4FDD\u5B58",onClick:a[1]||(a[1]=i=>e.$refs.form.submit())})])]),_:1}),V(uu,{class:"q-pt-none"},{default:I(()=>[V(gu,{ref:"form",greedy:"",onSubmit:e.onSubmit},{default:I(()=>[V(Iu,{filled:"",modelValue:e.formData.direction,"onUpdate:modelValue":a[2]||(a[2]=i=>e.formData.direction=i),options:[{label:"\u5356\u51FA",value:0},{label:"\u4E70\u5165",value:1}],"emit-value":"","map-options":"",label:"\u4EA4\u6613\u65B9\u5411 *","lazy-rules":"",rules:[i=>[0,1].includes(i)||"\u8BF7\u9009\u62E9\u4EA4\u6613\u65B9\u5411"]},null,8,["modelValue","rules"]),V(re,{filled:"",modelValue:e.formData.date,"onUpdate:modelValue":a[4]||(a[4]=i=>e.formData.date=i),label:"\u65E5\u671F *","lazy-rules":"",rules:[i=>(i==null?void 0:i.length)>0||"\u8BF7\u9009\u62E9\u65E5\u671F"]},{append:I(()=>[V(te,{name:"event",class:"cursor-pointer"},{default:I(()=>[V(bu,null,{default:I(()=>[V(yu,{modelValue:e.formData.date,"onUpdate:modelValue":a[3]||(a[3]=i=>e.formData.date=i),mask:"YYYY-MM-DD"},{default:I(()=>[tt("div",Du,[lu(V(Ce,{label:"\u5173\u95ED",color:"primary",flat:""},null,512),[[du]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","rules"]),V(re,{filled:"",type:"number",modelValue:e.formData.price,"onUpdate:modelValue":a[6]||(a[6]=i=>e.formData.price=i),modelModifiers:{number:!0},label:"\u5355\u4EF7 *",clearable:"","lazy-rules":"",rules:[i=>(i||e.formData.amount||0)>0||"\u5355\u4EF7\u548C\u603B\u989D\u5FC5\u987B\u586B\u5199\u4E00\u4E2A\u4E14\u5927\u4E8E\u96F6"]},Ve({_:2},[e.referencePrice?{name:"append",fn:I(()=>[V(se,{square:"",clickable:"",onClick:a[5]||(a[5]=i=>e.formData.price=+e.referencePrice)},{default:I(()=>[ie(ke(e.referencePrice)+" <= \u70B9\u51FB\u586B\u5165 ",1)]),_:1})]),key:"0"}:void 0]),1032,["modelValue","rules"]),V(re,{filled:"",type:"number",modelValue:e.formData.quantity,"onUpdate:modelValue":a[8]||(a[8]=i=>e.formData.quantity=i),modelModifiers:{number:!0},label:"\u6570\u91CF *",clearable:"","lazy-rules":"",rules:[i=>(i||0)>0||"\u6570\u91CF\u5FC5\u987B\u5927\u4E8E\u96F6"]},Ve({_:2},[e.referenceQuantity>0?{name:"append",fn:I(()=>[V(se,{square:"",clickable:"",onClick:a[7]||(a[7]=i=>e.formData.quantity=+e.referenceQuantity)},{default:I(()=>[ie(ke(e.referenceQuantity)+" <= \u70B9\u51FB\u586B\u5165 ",1)]),_:1})]),key:"0"}:void 0]),1032,["modelValue","rules"]),V(re,{filled:"",type:"number",modelValue:e.formData.amount,"onUpdate:modelValue":a[10]||(a[10]=i=>e.formData.amount=i),modelModifiers:{number:!0},label:"\u603B\u989D *",clearable:"","lazy-rules":"",rules:[i=>(i||e.formData.price||0)>0||"\u5355\u4EF7\u548C\u603B\u989D\u5FC5\u987B\u586B\u5199\u4E00\u4E2A\u4E14\u5927\u4E8E\u96F6"]},Ve({_:2},[e.referenceAmount?{name:"append",fn:I(()=>[V(se,{square:"",clickable:"",onClick:a[9]||(a[9]=i=>e.formData.amount=+e.referenceAmount)},{default:I(()=>[ie(ke(e.referenceAmount)+" <= \u70B9\u51FB\u586B\u5165 ",1)]),_:1})]),key:"0"}:void 0]),1032,["modelValue","rules"])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["model-value"])}var Nu=Zt(pu,[["render",Au]]);export{Nu as A,Hu as d,Qu as f,Tu as g,Ru as r,Mu as s};
