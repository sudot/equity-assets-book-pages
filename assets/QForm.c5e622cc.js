import{c as Ke,r as I,e as b,w as he,aA as Qt,j as M,k as Te,az as Lt,G as Wt,a1 as Ae,aB as Xt,ab as Ut,$ as Dt,a0 as wt,o as Jt,aC as bt,aD as xt,aE as Gt,al as Kt,a9 as ea,aa as ta,am as aa,aF as na,T as Oe,A as Yt,an as oa,Q as ie,z as ra,E as la,ao as ia,P as vt,aG as ua,aH as sa}from"./index.757f950f.js";import{u as ca,e as da,f as fa}from"./ClosePopup.13d91716.js";import{r as Xe}from"./rtl.b51694b1.js";var Ga=Ke({name:"QPopupProxy",props:{...ca,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:a,emit:l,attrs:o}){const{proxy:i}=Te(),{$q:r}=i,h=I(!1),c=I(null),v=b(()=>parseInt(e.breakpoint,10)),{canShow:_}=da({showing:h});function s(){return r.screen.width<v.value||r.screen.height<v.value?"dialog":"menu"}const g=I(s()),k=b(()=>g.value==="menu"?{maxHeight:"99vh"}:{});he(()=>s(),H=>{h.value!==!0&&(g.value=H)});function y(H){h.value=!0,l("show",H)}function F(H){h.value=!1,g.value=s(),l("hide",H)}return Object.assign(i,{show(H){_(H)===!0&&c.value.show(H)},hide(H){c.value.hide(H)},toggle(H){c.value.toggle(H)}}),Qt(i,"currentComponent",()=>({type:g.value,ref:c.value})),()=>{const H={ref:c,...k.value,...o,onShow:y,onHide:F};let O;return g.value==="dialog"?O=Lt:(O=fa,Object.assign(H,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),M(O,H,a.default)}}});const G=1e3,va=["start","center","end","start-force","center-force","end-force"],_t=Array.prototype.filter,ha=window.getComputedStyle(document.body).overflowAnchor===void 0?Wt:function(e,a){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const l=e.children||[];_t.call(l,i=>i.dataset&&i.dataset.qVsAnchor!==void 0).forEach(i=>{delete i.dataset.qVsAnchor});const o=l[a];o&&o.dataset&&(o.dataset.qVsAnchor="")}))};function He(e,a){return e+a}function Ze(e,a,l,o,i,r,h,c){const v=e===window?document.scrollingElement||document.documentElement:e,_=i===!0?"offsetWidth":"offsetHeight",s={scrollStart:0,scrollViewSize:-h-c,scrollMaxSize:0,offsetStart:-h,offsetEnd:-c};if(i===!0?(e===window?(s.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,s.scrollViewSize+=document.documentElement.clientWidth):(s.scrollStart=v.scrollLeft,s.scrollViewSize+=v.clientWidth),s.scrollMaxSize=v.scrollWidth,r===!0&&(s.scrollStart=(Xe===!0?s.scrollMaxSize-s.scrollViewSize:0)-s.scrollStart)):(e===window?(s.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,s.scrollViewSize+=document.documentElement.clientHeight):(s.scrollStart=v.scrollTop,s.scrollViewSize+=v.clientHeight),s.scrollMaxSize=v.scrollHeight),l!==null)for(let g=l.previousElementSibling;g!==null;g=g.previousElementSibling)g.classList.contains("q-virtual-scroll--skip")===!1&&(s.offsetStart+=g[_]);if(o!==null)for(let g=o.nextElementSibling;g!==null;g=g.nextElementSibling)g.classList.contains("q-virtual-scroll--skip")===!1&&(s.offsetEnd+=g[_]);if(a!==e){const g=v.getBoundingClientRect(),k=a.getBoundingClientRect();i===!0?(s.offsetStart+=k.left-g.left,s.offsetEnd-=k.width):(s.offsetStart+=k.top-g.top,s.offsetEnd-=k.height),e!==window&&(s.offsetStart+=s.scrollStart),s.offsetEnd+=s.scrollMaxSize-s.offsetStart}return s}function ht(e,a,l,o){a==="end"&&(a=(e===window?document.body:e)[l===!0?"scrollWidth":"scrollHeight"]),e===window?l===!0?(o===!0&&(a=(Xe===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-a),window.scrollTo(a,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,a):l===!0?(o===!0&&(a=(Xe===!0?e.scrollWidth-e.offsetWidth:0)-a),e.scrollLeft=a):e.scrollTop=a}function ke(e,a,l,o){if(l>=o)return 0;const i=a.length,r=Math.floor(l/G),h=Math.floor((o-1)/G)+1;let c=e.slice(r,h).reduce(He,0);return l%G!==0&&(c-=a.slice(r*G,l).reduce(He,0)),o%G!==0&&o!==i&&(c-=a.slice(o,h*G).reduce(He,0)),c}const ma={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Ka={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...ma};function en({virtualScrollLength:e,getVirtualScrollTarget:a,getVirtualScrollEl:l,virtualScrollItemSizeComputed:o}){const i=Te(),{props:r,emit:h,proxy:c}=i,{$q:v}=c;let _,s,g,k=[],y;const F=I(0),H=I(0),O=I({}),K=I(null),ue=I(null),z=I(null),d=I({from:0,to:0}),A=b(()=>r.tableColspan!==void 0?r.tableColspan:100);o===void 0&&(o=b(()=>r.virtualScrollItemSize));const se=b(()=>o.value+";"+r.virtualScrollHorizontal),ne=b(()=>se.value+";"+r.virtualScrollSliceRatioBefore+";"+r.virtualScrollSliceRatioAfter);he(ne,()=>{ee()}),he(se,ge);function ge(){ce(s,!0)}function De(D){ce(D===void 0?s:D)}function oe(D,w){const p=a();if(p==null||p.nodeType===8)return;const j=Ze(p,l(),K.value,ue.value,r.virtualScrollHorizontal,v.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd);g!==j.scrollViewSize&&ee(j.scrollViewSize),we(p,j,Math.min(e.value-1,Math.max(0,parseInt(D,10)||0)),0,va.indexOf(w)>-1?w:s>-1&&D>s?"end":"start")}function P(){const D=a();if(D==null||D.nodeType===8)return;const w=Ze(D,l(),K.value,ue.value,r.virtualScrollHorizontal,v.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd),p=e.value-1,j=w.scrollMaxSize-w.offsetStart-w.offsetEnd-H.value;if(_===w.scrollStart)return;if(w.scrollMaxSize<=0){we(D,w,0,0);return}g!==w.scrollViewSize&&ee(w.scrollViewSize),U(d.value.from);const B=Math.floor(w.scrollMaxSize-Math.max(w.scrollViewSize,w.offsetEnd)-Math.min(y[p],w.scrollViewSize/2));if(B>0&&Math.ceil(w.scrollStart)>=B){we(D,w,p,w.scrollMaxSize-w.offsetEnd-k.reduce(He,0));return}let q=0,C=w.scrollStart-w.offsetStart,Z=C;if(C<=j&&C+w.scrollViewSize>=F.value)C-=F.value,q=d.value.from,Z=C;else for(let x=0;C>=k[x]&&q<p;x++)C-=k[x],q+=G;for(;C>0&&q<p;)C-=y[q],C>-w.scrollViewSize?(q++,Z=C):Z=y[q]+C;we(D,w,q,Z)}function we(D,w,p,j,B){const q=typeof B=="string"&&B.indexOf("-force")>-1,C=q===!0?B.replace("-force",""):B,Z=C!==void 0?C:"start";let x=Math.max(0,p-O.value[Z]),X=x+O.value.total;X>e.value&&(X=e.value,x=Math.max(0,X-O.value.total)),_=w.scrollStart;const R=x!==d.value.from||X!==d.value.to;if(R===!1&&C===void 0){le(p);return}const{activeElement:N}=document,J=z.value;R===!0&&J!==null&&J!==N&&J.contains(N)===!0&&(J.addEventListener("focusout",re),setTimeout(()=>{J!==null&&J.removeEventListener("focusout",re)})),ha(J,p-x);const xe=C!==void 0?y.slice(x,p).reduce(He,0):0;if(R===!0){const ye=X>=d.value.from&&x<=d.value.to?d.value.to:X;d.value={from:x,to:ye},F.value=ke(k,y,0,x),H.value=ke(k,y,X,e.value),requestAnimationFrame(()=>{d.value.to!==X&&_===w.scrollStart&&(d.value={from:d.value.from,to:X},H.value=ke(k,y,X,e.value))})}requestAnimationFrame(()=>{if(_!==w.scrollStart)return;R===!0&&U(x);const ye=y.slice(x,p).reduce(He,0),te=ye+w.offsetStart+F.value,Q=te+y[p];let qe=te+j;if(C!==void 0){const $e=ye-xe,Ce=w.scrollStart+$e;qe=q!==!0&&Ce<te&&Q<Ce+w.scrollViewSize?Ce:C==="end"?Q-w.scrollViewSize:te-(C==="start"?0:Math.round((w.scrollViewSize-y[p])/2))}_=qe,ht(D,qe,r.virtualScrollHorizontal,v.lang.rtl),le(p)})}function U(D){const w=z.value;if(w){const p=_t.call(w.children,x=>x.classList&&x.classList.contains("q-virtual-scroll--skip")===!1),j=p.length,B=r.virtualScrollHorizontal===!0?x=>x.getBoundingClientRect().width:x=>x.offsetHeight;let q=D,C,Z;for(let x=0;x<j;){for(C=B(p[x]),x++;x<j&&p[x].classList.contains("q-virtual-scroll--with-prev")===!0;)C+=B(p[x]),x++;Z=C-y[q],Z!==0&&(y[q]+=Z,k[Math.floor(q/G)]+=Z),q++}}}function re(){z.value!==null&&z.value!==void 0&&z.value.focus()}function ce(D,w){const p=1*o.value;(w===!0||Array.isArray(y)===!1)&&(y=[]);const j=y.length;y.length=e.value;for(let q=e.value-1;q>=j;q--)y[q]=p;const B=Math.floor((e.value-1)/G);k=[];for(let q=0;q<=B;q++){let C=0;const Z=Math.min((q+1)*G,e.value);for(let x=q*G;x<Z;x++)C+=y[x];k.push(C)}s=-1,_=void 0,F.value=ke(k,y,0,d.value.from),H.value=ke(k,y,d.value.to,e.value),D>=0?(U(d.value.from),Ae(()=>{oe(D)})):de()}function ee(D){if(D===void 0&&typeof window!="undefined"){const C=a();C!=null&&C.nodeType!==8&&(D=Ze(C,l(),K.value,ue.value,r.virtualScrollHorizontal,v.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd).scrollViewSize)}g=D;const w=parseFloat(r.virtualScrollSliceRatioBefore)||0,p=parseFloat(r.virtualScrollSliceRatioAfter)||0,j=1+w+p,B=D===void 0||D<=0?1:Math.ceil(D/o.value),q=Math.max(1,B,Math.ceil((r.virtualScrollSliceSize>0?r.virtualScrollSliceSize:10)/j));O.value={total:Math.ceil(q*j),start:Math.ceil(q*w),center:Math.ceil(q*(.5+w)),end:Math.ceil(q*(1+w)),view:B}}function L(D,w){const p=r.virtualScrollHorizontal===!0?"width":"height",j={["--q-virtual-scroll-item-"+p]:o.value+"px"};return[D==="tbody"?M(D,{class:"q-virtual-scroll__padding",key:"before",ref:K},[M("tr",[M("td",{style:{[p]:`${F.value}px`,...j},colspan:A.value})])]):M(D,{class:"q-virtual-scroll__padding",key:"before",ref:K,style:{[p]:`${F.value}px`,...j}}),M(D,{class:"q-virtual-scroll__content",key:"content",ref:z,tabindex:-1},w.flat()),D==="tbody"?M(D,{class:"q-virtual-scroll__padding",key:"after",ref:ue},[M("tr",[M("td",{style:{[p]:`${H.value}px`,...j},colspan:A.value})])]):M(D,{class:"q-virtual-scroll__padding",key:"after",ref:ue,style:{[p]:`${H.value}px`,...j}})]}function le(D){s!==D&&(r.onVirtualScroll!==void 0&&h("virtualScroll",{index:D,from:d.value.from,to:d.value.to-1,direction:D<s?"decrease":"increase",ref:c}),s=D)}ee();const de=Xt(P,v.platform.is.ios===!0?120:35);Ut(()=>{ee()});let be=!1;return Dt(()=>{be=!0}),wt(()=>{if(be!==!0)return;const D=a();_!==void 0&&D!==void 0&&D!==null&&D.nodeType!==8?ht(D,_,r.virtualScrollHorizontal,v.lang.rtl):oe(s)}),Jt(()=>{de.cancel()}),Object.assign(c,{scrollTo:oe,reset:ge,refresh:De}),{virtualScrollSliceRange:d,virtualScrollSliceSizeComputed:O,setVirtualScrollSize:ee,onVirtualScrollEvt:de,localResetVirtualScroll:ce,padVirtualScroll:L,scrollTo:oe,reset:ge,refresh:De}}function ga(){const e=new Map;return{getCache:function(a,l){return e[a]===void 0?e[a]=l:e[a]},getCacheWithFn:function(a,l){return e[a]===void 0?e[a]=l():e[a]}}}const me=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function ya(e,a,l){return Object.prototype.toString.call(e)==="[object Date]"&&(l=e.getDate(),a=e.getMonth()+1,e=e.getFullYear()),wa(et(e,a,l))}function mt(e,a,l){return Ht(Da(e,a,l))}function Sa(e){return Ma(e)===0}function Ve(e,a){return a<=6?31:a<=11||Sa(e)?30:29}function Ma(e){const a=me.length;let l=me[0],o,i,r,h,c;if(e<l||e>=me[a-1])throw new Error("Invalid Jalaali year "+e);for(c=1;c<a&&(o=me[c],i=o-l,!(e<o));c+=1)l=o;return h=e-l,i-h<6&&(h=h-i+$(i+4,33)*33),r=W(W(h+1,33)-1,4),r===-1&&(r=4),r}function pt(e,a){const l=me.length,o=e+621;let i=-14,r=me[0],h,c,v,_,s;if(e<r||e>=me[l-1])throw new Error("Invalid Jalaali year "+e);for(s=1;s<l&&(h=me[s],c=h-r,!(e<h));s+=1)i=i+$(c,33)*8+$(W(c,33),4),r=h;_=e-r,i=i+$(_,33)*8+$(W(_,33)+3,4),W(c,33)===4&&c-_===4&&(i+=1);const g=$(o,4)-$(($(o,100)+1)*3,4)-150,k=20+i-g;return a||(c-_<6&&(_=_-c+$(c+4,33)*33),v=W(W(_+1,33)-1,4),v===-1&&(v=4)),{leap:v,gy:o,march:k}}function Da(e,a,l){const o=pt(e,!0);return et(o.gy,3,o.march)+(a-1)*31-$(a,7)*(a-7)+l-1}function wa(e){const a=Ht(e).gy;let l=a-621,o,i,r;const h=pt(l,!1),c=et(a,3,h.march);if(r=e-c,r>=0){if(r<=185)return i=1+$(r,31),o=W(r,31)+1,{jy:l,jm:i,jd:o};r-=186}else l-=1,r+=179,h.leap===1&&(r+=1);return i=7+$(r,30),o=W(r,30)+1,{jy:l,jm:i,jd:o}}function et(e,a,l){let o=$((e+$(a-8,6)+100100)*1461,4)+$(153*W(a+9,12)+2,5)+l-34840408;return o=o-$($(e+100100+$(a-8,6),100)*3,4)+752,o}function Ht(e){let a=4*e+139361631;a=a+$($(4*e+183187720,146097)*3,4)*4-3908;const l=$(W(a,1461),4)*5+308,o=$(W(l,153),5)+1,i=W($(l,153),12)+1;return{gy:$(a,1461)-100100+$(8-i,6),gm:i,gd:o}}function $(e,a){return~~(e/a)}function W(e,a){return e-~~(e/a)*a}function ba(e){return e.charAt(0).toUpperCase()+e.slice(1)}function tn(e,a,l){if(l<=a)return a;const o=l-a+1;let i=a+(e-a)%o;return i<a&&(i=o+i),i===0?0:i}function V(e,a=2,l="0"){if(e==null)return e;const o=""+e;return o.length>=a?o:new Array(a-o.length+1).join(l)+o}const xa=["gregorian","persian"],Ya={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>xa.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},_a=["update:modelValue"];function fe(e){return e.year+"/"+V(e.month)+"/"+V(e.day)}function pa(e,a){const l=b(()=>e.disable!==!0&&e.readonly!==!0),o=b(()=>l.value===!0?0:-1),i=b(()=>{const c=[];return e.color!==void 0&&c.push(`bg-${e.color}`),e.textColor!==void 0&&c.push(`text-${e.textColor}`),c.join(" ")});function r(){return e.locale!==void 0?{...a.lang.date,...e.locale}:a.lang.date}function h(c){const v=new Date,_=c===!0?null:0;if(e.calendar==="persian"){const s=ya(v);return{year:s.jy,month:s.jm,day:s.jd}}return{year:v.getFullYear(),month:v.getMonth()+1,day:v.getDate(),hour:_,minute:_,second:_,millisecond:_}}return{editable:l,tabindex:o,headerClass:i,getLocale:r,getCurrentDate:h}}const qt=864e5,Ha=36e5,Ue=6e4,Ct="YYYY-MM-DDTHH:mm:ss.SSSZ",qa=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Ca=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,Qe={};function za(e,a){const l="("+a.days.join("|")+")",o=e+l;if(Qe[o]!==void 0)return Qe[o];const i="("+a.daysShort.join("|")+")",r="("+a.months.join("|")+")",h="("+a.monthsShort.join("|")+")",c={};let v=0;const _=e.replace(Ca,g=>{switch(v++,g){case"YY":return c.YY=v,"(-?\\d{1,2})";case"YYYY":return c.YYYY=v,"(-?\\d{1,4})";case"M":return c.M=v,"(\\d{1,2})";case"MM":return c.M=v,"(\\d{2})";case"MMM":return c.MMM=v,h;case"MMMM":return c.MMMM=v,r;case"D":return c.D=v,"(\\d{1,2})";case"Do":return c.D=v++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return c.D=v,"(\\d{2})";case"H":return c.H=v,"(\\d{1,2})";case"HH":return c.H=v,"(\\d{2})";case"h":return c.h=v,"(\\d{1,2})";case"hh":return c.h=v,"(\\d{2})";case"m":return c.m=v,"(\\d{1,2})";case"mm":return c.m=v,"(\\d{2})";case"s":return c.s=v,"(\\d{1,2})";case"ss":return c.s=v,"(\\d{2})";case"S":return c.S=v,"(\\d{1})";case"SS":return c.S=v,"(\\d{2})";case"SSS":return c.S=v,"(\\d{3})";case"A":return c.A=v,"(AM|PM)";case"a":return c.a=v,"(am|pm)";case"aa":return c.aa=v,"(a\\.m\\.|p\\.m\\.)";case"ddd":return i;case"dddd":return l;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return c.Z=v,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return c.ZZ=v,"(Z|[+-]\\d{2}\\d{2})";case"X":return c.X=v,"(-?\\d+)";case"x":return c.x=v,"(-?\\d{4,})";default:return v--,g[0]==="["&&(g=g.substring(1,g.length-1)),g.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),s={map:c,regex:new RegExp("^"+_)};return Qe[o]=s,s}function zt(e,a){return e!==void 0?e:a!==void 0?a.date:Gt.date}function gt(e,a=""){const l=e>0?"-":"+",o=Math.abs(e),i=Math.floor(o/60),r=o%60;return l+V(i)+a+V(r)}function Oa(e,a,l){let o=e.getFullYear(),i=e.getMonth();const r=e.getDate();return a.year!==void 0&&(o+=l*a.year,delete a.year),a.month!==void 0&&(i+=l*a.month,delete a.month),e.setDate(1),e.setMonth(2),e.setFullYear(o),e.setMonth(i),e.setDate(Math.min(r,nt(e))),a.date!==void 0&&(e.setDate(e.getDate()+l*a.date),delete a.date),e}function ka(e,a,l){const o=a.year!==void 0?a.year:e[`get${l}FullYear`](),i=a.month!==void 0?a.month-1:e[`get${l}Month`](),r=new Date(o,i+1,0).getDate(),h=Math.min(r,a.date!==void 0?a.date:e[`get${l}Date`]());return e[`set${l}Date`](1),e[`set${l}Month`](2),e[`set${l}FullYear`](o),e[`set${l}Month`](i),e[`set${l}Date`](h),delete a.year,delete a.month,delete a.date,e}function tt(e,a,l){const o=Ot(a),i=new Date(e),r=o.year!==void 0||o.month!==void 0||o.date!==void 0?Oa(i,o,l):i;for(const h in o){const c=ba(h);r[`set${c}`](r[`get${c}`]()+l*o[h])}return r}function Ot(e){const a={...e};return e.years!==void 0&&(a.year=e.years,delete a.years),e.months!==void 0&&(a.month=e.months,delete a.months),e.days!==void 0&&(a.date=e.days,delete a.days),e.day!==void 0&&(a.date=e.day,delete a.day),e.hour!==void 0&&(a.hours=e.hour,delete a.hour),e.minute!==void 0&&(a.minutes=e.minute,delete a.minute),e.second!==void 0&&(a.seconds=e.second,delete a.second),e.millisecond!==void 0&&(a.milliseconds=e.millisecond,delete a.millisecond),a}function kt(e,a,l){const o=Ot(a),i=l===!0?"UTC":"",r=new Date(e),h=o.year!==void 0||o.month!==void 0||o.date!==void 0?ka(r,o,i):r;for(const c in o){const v=c.charAt(0).toUpperCase()+c.slice(1);h[`set${i}${v}`](o[c])}return h}function Ea(e,a,l){const o=Et(e,a,l),i=new Date(o.year,o.month===null?null:o.month-1,o.day===null?1:o.day,o.hour,o.minute,o.second,o.millisecond),r=i.getTimezoneOffset();return o.timezoneOffset===null||o.timezoneOffset===r?i:tt(i,{minutes:o.timezoneOffset-r},1)}function Et(e,a,l,o,i){const r={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(i!==void 0&&Object.assign(r,i),e==null||e===""||typeof e!="string")return r;a===void 0&&(a=Ct);const h=zt(l,bt.props),c=h.months,v=h.monthsShort,{regex:_,map:s}=za(a,h),g=e.match(_);if(g===null)return r;let k="";if(s.X!==void 0||s.x!==void 0){const y=parseInt(g[s.X!==void 0?s.X:s.x],10);if(isNaN(y)===!0||y<0)return r;const F=new Date(y*(s.X!==void 0?1e3:1));r.year=F.getFullYear(),r.month=F.getMonth()+1,r.day=F.getDate(),r.hour=F.getHours(),r.minute=F.getMinutes(),r.second=F.getSeconds(),r.millisecond=F.getMilliseconds()}else{if(s.YYYY!==void 0)r.year=parseInt(g[s.YYYY],10);else if(s.YY!==void 0){const y=parseInt(g[s.YY],10);r.year=y<0?y:2e3+y}if(s.M!==void 0){if(r.month=parseInt(g[s.M],10),r.month<1||r.month>12)return r}else s.MMM!==void 0?r.month=v.indexOf(g[s.MMM])+1:s.MMMM!==void 0&&(r.month=c.indexOf(g[s.MMMM])+1);if(s.D!==void 0){if(r.day=parseInt(g[s.D],10),r.year===null||r.month===null||r.day<1)return r;const y=o!=="persian"?new Date(r.year,r.month,0).getDate():Ve(r.year,r.month);if(r.day>y)return r}s.H!==void 0?r.hour=parseInt(g[s.H],10)%24:s.h!==void 0&&(r.hour=parseInt(g[s.h],10)%12,(s.A&&g[s.A]==="PM"||s.a&&g[s.a]==="pm"||s.aa&&g[s.aa]==="p.m.")&&(r.hour+=12),r.hour=r.hour%24),s.m!==void 0&&(r.minute=parseInt(g[s.m],10)%60),s.s!==void 0&&(r.second=parseInt(g[s.s],10)%60),s.S!==void 0&&(r.millisecond=parseInt(g[s.S],10)*10**(3-g[s.S].length)),(s.Z!==void 0||s.ZZ!==void 0)&&(k=s.Z!==void 0?g[s.Z].replace(":",""):g[s.ZZ],r.timezoneOffset=(k[0]==="+"?-1:1)*(60*k.slice(1,3)+1*k.slice(3,5)))}return r.dateHash=V(r.year,6)+"/"+V(r.month)+"/"+V(r.day),r.timeHash=V(r.hour)+":"+V(r.minute)+":"+V(r.second)+k,r}function Fa(e){return typeof e=="number"?!0:isNaN(Date.parse(e))===!1}function Va(e,a){return kt(new Date,e,a)}function Aa(e){const a=new Date(e).getDay();return a===0?7:a}function Je(e){const a=new Date(e.getFullYear(),e.getMonth(),e.getDate());a.setDate(a.getDate()-(a.getDay()+6)%7+3);const l=new Date(a.getFullYear(),0,4);l.setDate(l.getDate()-(l.getDay()+6)%7+3);const o=a.getTimezoneOffset()-l.getTimezoneOffset();a.setHours(a.getHours()-o);const i=(a-l)/(qt*7);return 1+Math.floor(i)}function Ta(e){return e.getFullYear()*1e4+e.getMonth()*100+e.getDate()}function Le(e,a){const l=new Date(e);return a===!0?Ta(l):l.getTime()}function $a(e,a,l,o={}){const i=Le(a,o.onlyDate),r=Le(l,o.onlyDate),h=Le(e,o.onlyDate);return(h>i||o.inclusiveFrom===!0&&h===i)&&(h<r||o.inclusiveTo===!0&&h===r)}function ja(e,a){return tt(e,a,1)}function Ia(e,a){return tt(e,a,-1)}function ae(e,a,l){const o=new Date(e),i=`set${l===!0?"UTC":""}`;switch(a){case"year":case"years":o[`${i}Month`](0);case"month":case"months":o[`${i}Date`](1);case"day":case"days":case"date":o[`${i}Hours`](0);case"hour":case"hours":o[`${i}Minutes`](0);case"minute":case"minutes":o[`${i}Seconds`](0);case"second":case"seconds":o[`${i}Milliseconds`](0)}return o}function Ra(e,a,l){const o=new Date(e),i=`set${l===!0?"UTC":""}`;switch(a){case"year":case"years":o[`${i}Month`](11);case"month":case"months":o[`${i}Date`](nt(o));case"day":case"days":case"date":o[`${i}Hours`](23);case"hour":case"hours":o[`${i}Minutes`](59);case"minute":case"minutes":o[`${i}Seconds`](59);case"second":case"seconds":o[`${i}Milliseconds`](999)}return o}function Ba(e){let a=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(l=>{a=Math.max(a,new Date(l))}),a}function Na(e){let a=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(l=>{a=Math.min(a,new Date(l))}),a}function Fe(e,a,l){return(e.getTime()-e.getTimezoneOffset()*Ue-(a.getTime()-a.getTimezoneOffset()*Ue))/l}function at(e,a,l="days"){const o=new Date(e),i=new Date(a);switch(l){case"years":case"year":return o.getFullYear()-i.getFullYear();case"months":case"month":return(o.getFullYear()-i.getFullYear())*12+o.getMonth()-i.getMonth();case"days":case"day":case"date":return Fe(ae(o,"day"),ae(i,"day"),qt);case"hours":case"hour":return Fe(ae(o,"hour"),ae(i,"hour"),Ha);case"minutes":case"minute":return Fe(ae(o,"minute"),ae(i,"minute"),Ue);case"seconds":case"second":return Fe(ae(o,"second"),ae(i,"second"),1e3)}}function Ge(e){return at(e,ae(e,"year"),"days")+1}function Pa(e){return xt(e)===!0?"date":typeof e=="number"?"number":"string"}function Za(e,a,l){const o=new Date(e);if(a){const i=new Date(a);if(o<i)return i}if(l){const i=new Date(l);if(o>i)return i}return o}function Qa(e,a,l){const o=new Date(e),i=new Date(a);if(l===void 0)return o.getTime()===i.getTime();switch(l){case"second":case"seconds":if(o.getSeconds()!==i.getSeconds())return!1;case"minute":case"minutes":if(o.getMinutes()!==i.getMinutes())return!1;case"hour":case"hours":if(o.getHours()!==i.getHours())return!1;case"day":case"days":case"date":if(o.getDate()!==i.getDate())return!1;case"month":case"months":if(o.getMonth()!==i.getMonth())return!1;case"year":case"years":if(o.getFullYear()!==i.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${l}`)}return!0}function nt(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function yt(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const St={YY(e,a,l){const o=this.YYYY(e,a,l)%100;return o>=0?V(o):"-"+V(Math.abs(o))},YYYY(e,a,l){return l!=null?l:e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return V(e.getMonth()+1)},MMM(e,a){return a.monthsShort[e.getMonth()]},MMMM(e,a){return a.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return yt(this.Q(e))},D(e){return e.getDate()},Do(e){return yt(e.getDate())},DD(e){return V(e.getDate())},DDD(e){return Ge(e)},DDDD(e){return V(Ge(e),3)},d(e){return e.getDay()},dd(e,a){return this.dddd(e,a).slice(0,2)},ddd(e,a){return a.daysShort[e.getDay()]},dddd(e,a){return a.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return Je(e)},ww(e){return V(Je(e))},H(e){return e.getHours()},HH(e){return V(e.getHours())},h(e){const a=e.getHours();return a===0?12:a>12?a%12:a},hh(e){return V(this.h(e))},m(e){return e.getMinutes()},mm(e){return V(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return V(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return V(Math.floor(e.getMilliseconds()/10))},SSS(e){return V(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,a,l,o){const i=o==null?e.getTimezoneOffset():o;return gt(i,":")},ZZ(e,a,l,o){const i=o==null?e.getTimezoneOffset():o;return gt(i)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function Ft(e,a,l,o,i){if(e!==0&&!e||e===1/0||e===-1/0)return;const r=new Date(e);if(isNaN(r))return;a===void 0&&(a=Ct);const h=zt(l,bt.props);return a.replace(qa,(c,v)=>c in St?St[c](r,h,o,i):v===void 0?c:v.split("\\]").join("]"))}function La(e){return xt(e)===!0?new Date(e.getTime()):e}var an={isValid:Fa,extractDate:Ea,buildDate:Va,getDayOfWeek:Aa,getWeekOfYear:Je,isBetweenDates:$a,addToDate:ja,subtractFromDate:Ia,adjustDate:kt,startOfDate:ae,endOfDate:Ra,getMaxDate:Ba,getMinDate:Na,getDateDiff:at,getDayOfYear:Ge,inferDateFormat:Pa,getDateBetween:Za,isSameDate:Qa,daysInMonth:nt,formatDate:Ft,clone:La};const Me=20,Wa=["Calendar","Years","Months"],Mt=e=>Wa.includes(e),We=e=>/^-?[\d]+\/[0-1]\d$/.test(e),pe=" \u2014 ";function ve(e){return e.year+"/"+V(e.month)}var nn=Ke({name:"QDate",props:{...Ya,...Kt,...ea,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:We},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:We},navigationMaxYearMonth:{type:String,validator:We},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Mt}},emits:[..._a,"rangeStart","rangeEnd","navigation"],setup(e,{slots:a,emit:l}){const{proxy:o}=Te(),{$q:i}=o,r=ta(e,i),{getCache:h}=ga(),{tabindex:c,headerClass:v,getLocale:_,getCurrentDate:s}=pa(e,i);let g;const k=aa(e),y=oa(k),F=I(null),H=I(lt()),O=I(_()),K=b(()=>lt()),ue=b(()=>_()),z=b(()=>s()),d=I(it(H.value,O.value)),A=I(e.defaultView),se=i.lang.rtl===!0?"right":"left",ne=I(se.value),ge=I(se.value),De=d.value.year,oe=I(De-De%Me-(De<0?Me:0)),P=I(null),we=b(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(r.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),U=b(()=>e.color||"primary"),re=b(()=>e.textColor||"white"),ce=b(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),ee=b(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),L=b(()=>ee.value.filter(t=>typeof t=="string").map(t=>Ie(t,H.value,O.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),le=b(()=>{const t=n=>Ie(n,H.value,O.value);return ee.value.filter(n=>na(n)===!0&&n.from!==void 0&&n.to!==void 0).map(n=>({from:t(n.from),to:t(n.to)})).filter(n=>n.from.dateHash!==null&&n.to.dateHash!==null&&n.from.dateHash<n.to.dateHash)}),de=b(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const n=mt(t.year,t.month,t.day);return new Date(n.gy,n.gm-1,n.gd)}),be=b(()=>e.calendar==="persian"?fe:(t,n,u)=>Ft(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),n===void 0?H.value:n,u===void 0?O.value:u,t.year,t.timezoneOffset)),D=b(()=>L.value.length+le.value.reduce((t,n)=>t+1+at(de.value(n.to),de.value(n.from)),0)),w=b(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(P.value!==null){const u=P.value.init,m=de.value(u);return O.value.daysShort[m.getDay()]+", "+O.value.monthsShort[u.month-1]+" "+u.day+pe+"?"}if(D.value===0)return pe;if(D.value>1)return`${D.value} ${O.value.pluralDay}`;const t=L.value[0],n=de.value(t);return isNaN(n.valueOf())===!0?pe:O.value.headerTitle!==void 0?O.value.headerTitle(n,t):O.value.daysShort[n.getDay()]+", "+O.value.monthsShort[t.month-1]+" "+t.day}),p=b(()=>L.value.concat(le.value.map(n=>n.from)).sort((n,u)=>n.year-u.year||n.month-u.month)[0]),j=b(()=>L.value.concat(le.value.map(n=>n.to)).sort((n,u)=>u.year-n.year||u.month-n.month)[0]),B=b(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(D.value===0)return pe;if(D.value>1){const t=p.value,n=j.value,u=O.value.monthsShort;return u[t.month-1]+(t.year!==n.year?" "+t.year+pe+u[n.month-1]+" ":t.month!==n.month?pe+u[n.month-1]:"")+" "+n.year}return L.value[0].year}),q=b(()=>{const t=[i.iconSet.datetime.arrowLeft,i.iconSet.datetime.arrowRight];return i.lang.rtl===!0?t.reverse():t}),C=b(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):O.value.firstDayOfWeek),Z=b(()=>{const t=O.value.daysShort,n=C.value;return n>0?t.slice(n,7).concat(t.slice(0,n)):t}),x=b(()=>{const t=d.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():Ve(t.year,t.month)}),X=b(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),R=b(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),N=b(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),J=b(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return R.value!==null&&R.value.year>=d.value.year&&(t.year.prev=!1,R.value.year===d.value.year&&R.value.month>=d.value.month&&(t.month.prev=!1)),N.value!==null&&N.value.year<=d.value.year&&(t.year.next=!1,N.value.year===d.value.year&&N.value.month<=d.value.month&&(t.month.next=!1)),t}),xe=b(()=>{const t={};return L.value.forEach(n=>{const u=ve(n);t[u]===void 0&&(t[u]=[]),t[u].push(n.day)}),t}),ye=b(()=>{const t={};return le.value.forEach(n=>{const u=ve(n.from),m=ve(n.to);if(t[u]===void 0&&(t[u]=[]),t[u].push({from:n.from.day,to:u===m?n.to.day:void 0,range:n}),u<m){let f;const{year:E,month:S}=n.from,Y=S<12?{year:E,month:S+1}:{year:E+1,month:1};for(;(f=ve(Y))<=m;)t[f]===void 0&&(t[f]=[]),t[f].push({from:void 0,to:f===m?n.to.day:void 0,range:n}),Y.month++,Y.month>12&&(Y.year++,Y.month=1)}}),t}),te=b(()=>{if(P.value===null)return;const{init:t,initHash:n,final:u,finalHash:m}=P.value,[f,E]=n<=m?[t,u]:[u,t],S=ve(f),Y=ve(E);if(S!==Q.value&&Y!==Q.value)return;const T={};return S===Q.value?(T.from=f.day,T.includeFrom=!0):T.from=1,Y===Q.value?(T.to=E.day,T.includeTo=!0):T.to=x.value,T}),Q=b(()=>ve(d.value)),qe=b(()=>{const t={};if(e.options===void 0){for(let u=1;u<=x.value;u++)t[u]=!0;return t}const n=typeof e.options=="function"?e.options:u=>e.options.includes(u);for(let u=1;u<=x.value;u++){const m=Q.value+"/"+V(u);t[u]=n(m)}return t}),$e=b(()=>{const t={};if(e.events===void 0)for(let n=1;n<=x.value;n++)t[n]=!1;else{const n=typeof e.events=="function"?e.events:u=>e.events.includes(u);for(let u=1;u<=x.value;u++){const m=Q.value+"/"+V(u);t[u]=n(m)===!0&&X.value(m)}}return t}),Ce=b(()=>{let t,n;const{year:u,month:m}=d.value;if(e.calendar!=="persian")t=new Date(u,m-1,1),n=new Date(u,m-1,0).getDate();else{const f=mt(u,m,1);t=new Date(f.gy,f.gm-1,f.gd);let E=m-1,S=u;E===0&&(E=12,S--),n=Ve(S,E)}return{days:t.getDay()-C.value-1,endDay:n}}),ot=b(()=>{const t=[],{days:n,endDay:u}=Ce.value,m=n<0?n+7:n;if(m<6)for(let S=u-m;S<=u;S++)t.push({i:S,fill:!0});const f=t.length;for(let S=1;S<=x.value;S++){const Y={i:S,event:$e.value[S],classes:[]};qe.value[S]===!0&&(Y.in=!0,Y.flat=!0),t.push(Y)}if(xe.value[Q.value]!==void 0&&xe.value[Q.value].forEach(S=>{const Y=f+S-1;Object.assign(t[Y],{selected:!0,unelevated:!0,flat:!1,color:U.value,textColor:re.value})}),ye.value[Q.value]!==void 0&&ye.value[Q.value].forEach(S=>{if(S.from!==void 0){const Y=f+S.from-1,T=f+(S.to||x.value)-1;for(let ze=Y;ze<=T;ze++)Object.assign(t[ze],{range:S.range,unelevated:!0,color:U.value,textColor:re.value});Object.assign(t[Y],{rangeFrom:!0,flat:!1}),S.to!==void 0&&Object.assign(t[T],{rangeTo:!0,flat:!1})}else if(S.to!==void 0){const Y=f+S.to-1;for(let T=f;T<=Y;T++)Object.assign(t[T],{range:S.range,unelevated:!0,color:U.value,textColor:re.value});Object.assign(t[Y],{flat:!1,rangeTo:!0})}else{const Y=f+x.value-1;for(let T=f;T<=Y;T++)Object.assign(t[T],{range:S.range,unelevated:!0,color:U.value,textColor:re.value})}}),te.value!==void 0){const S=f+te.value.from-1,Y=f+te.value.to-1;for(let T=S;T<=Y;T++)t[T].color=U.value,t[T].editRange=!0;te.value.includeFrom===!0&&(t[S].editRangeFrom=!0),te.value.includeTo===!0&&(t[Y].editRangeTo=!0)}d.value.year===z.value.year&&d.value.month===z.value.month&&(t[f+z.value.day-1].today=!0);const E=t.length%7;if(E>0){const S=7-E;for(let Y=1;Y<=S;Y++)t.push({i:Y,fill:!0})}return t.forEach(S=>{let Y="q-date__calendar-item ";S.fill===!0?Y+="q-date__calendar-item--fill":(Y+=`q-date__calendar-item--${S.in===!0?"in":"out"}`,S.range!==void 0&&(Y+=` q-date__range${S.rangeTo===!0?"-to":S.rangeFrom===!0?"-from":""}`),S.editRange===!0&&(Y+=` q-date__edit-range${S.editRangeFrom===!0?"-from":""}${S.editRangeTo===!0?"-to":""}`),(S.range!==void 0||S.editRange===!0)&&(Y+=` text-${S.color}`)),S.classes=Y}),t}),Vt=b(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});he(()=>e.modelValue,t=>{if(g===t)g=0;else{const n=it(H.value,O.value);Ye(n.year,n.month,n)}}),he(A,()=>{F.value!==null&&o.$el.contains(document.activeElement)===!0&&F.value.focus()}),he(()=>d.value.year+"|"+d.value.month,()=>{l("navigation",{year:d.value.year,month:d.value.month})}),he(K,t=>{ft(t,O.value,"mask"),H.value=t}),he(ue,t=>{ft(H.value,t,"locale"),O.value=t});function rt(){const t=z.value,n=xe.value[ve(t)];(n===void 0||n.includes(t.day)===!1)&&Be(t),je(t.year,t.month)}function At(t){Mt(t)===!0&&(A.value=t)}function Tt(t,n){["month","year"].includes(t)&&(t==="month"?st:Re)(n===!0?-1:1)}function je(t,n){A.value="Calendar",Ye(t,n)}function $t(t,n){if(e.range===!1||!t){P.value=null;return}const u=Object.assign({...d.value},t),m=n!==void 0?Object.assign({...d.value},n):u;P.value={init:u,initHash:fe(u),final:m,finalHash:fe(m)},je(u.year,u.month)}function lt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ie(t,n,u){return Et(t,n,u,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function it(t,n){const u=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(u.length===0)return ut();const m=u[u.length-1],f=Ie(m.from!==void 0?m.from:m,t,n);return f.dateHash===null?ut():f}function ut(){let t,n;if(e.defaultYearMonth!==void 0){const u=e.defaultYearMonth.split("/");t=parseInt(u[0],10),n=parseInt(u[1],10)}else{const u=z.value!==void 0?z.value:s();t=u.year,n=u.month}return{year:t,month:n,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+V(n)+"/01"}}function st(t){let n=d.value.year,u=Number(d.value.month)+t;u===13?(u=1,n++):u===0&&(u=12,n--),Ye(n,u),ce.value===!0&&Ee("month")}function Re(t){const n=Number(d.value.year)+t;Ye(n,d.value.month),ce.value===!0&&Ee("year")}function jt(t){Ye(t,d.value.month),A.value=e.defaultView==="Years"?"Months":"Calendar",ce.value===!0&&Ee("year")}function It(t){Ye(d.value.year,t),A.value="Calendar",ce.value===!0&&Ee("month")}function Rt(t,n){const u=xe.value[n];(u!==void 0&&u.includes(t.day)===!0?Ne:Be)(t)}function Se(t){return{year:t.year,month:t.month,day:t.day}}function Ye(t,n,u){if(R.value!==null&&t<=R.value.year&&(t=R.value.year,n<R.value.month&&(n=R.value.month)),N.value!==null&&t>=N.value.year&&(t=N.value.year,n>N.value.month&&(n=N.value.month)),u!==void 0){const{hour:f,minute:E,second:S,millisecond:Y,timezoneOffset:T,timeHash:ze}=u;Object.assign(d.value,{hour:f,minute:E,second:S,millisecond:Y,timezoneOffset:T,timeHash:ze})}const m=t+"/"+V(n)+"/01";m!==d.value.dateHash&&(ne.value=d.value.dateHash<m==(i.lang.rtl!==!0)?"left":"right",t!==d.value.year&&(ge.value=ne.value),Ae(()=>{oe.value=t-t%Me-(t<0?Me:0),Object.assign(d.value,{year:t,month:n,day:1,dateHash:m})}))}function ct(t,n,u){const m=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;g=m;const{reason:f,details:E}=dt(n,u);l("update:modelValue",m,f,E)}function Ee(t){const n=L.value[0]!==void 0&&L.value[0].dateHash!==null?{...L.value[0]}:{...d.value};Ae(()=>{n.year=d.value.year,n.month=d.value.month;const u=e.calendar!=="persian"?new Date(n.year,n.month,0).getDate():Ve(n.year,n.month);n.day=Math.min(Math.max(1,n.day),u);const m=_e(n);g=m;const{details:f}=dt("",n);l("update:modelValue",m,t,f)})}function dt(t,n){return n.from!==void 0?{reason:`${t}-range`,details:{...Se(n.target),from:Se(n.from),to:Se(n.to)}}:{reason:`${t}-day`,details:Se(n)}}function _e(t,n,u){return t.from!==void 0?{from:be.value(t.from,n,u),to:be.value(t.to,n,u)}:be.value(t,n,u)}function Be(t){let n;if(e.multiple===!0)if(t.from!==void 0){const u=fe(t.from),m=fe(t.to),f=L.value.filter(S=>S.dateHash<u||S.dateHash>m),E=le.value.filter(({from:S,to:Y})=>Y.dateHash<u||S.dateHash>m);n=f.concat(E).concat(t).map(S=>_e(S))}else{const u=ee.value.slice();u.push(_e(t)),n=u}else n=_e(t);ct(n,"add",t)}function Ne(t){if(e.noUnset===!0)return;let n=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const u=_e(t);t.from!==void 0?n=e.modelValue.filter(m=>m.from!==void 0?m.from!==u.from&&m.to!==u.to:!0):n=e.modelValue.filter(m=>m!==u),n.length===0&&(n=null)}ct(n,"remove",t)}function ft(t,n,u){const m=L.value.concat(le.value).map(f=>_e(f,t,n)).filter(f=>f.from!==void 0?f.from.dateHash!==null&&f.to.dateHash!==null:f.dateHash!==null);l("update:modelValue",(e.multiple===!0?m:m[0])||null,u)}function Bt(){if(e.minimal!==!0)return M("div",{class:"q-date__header "+v.value},[M("div",{class:"relative-position"},[M(Oe,{name:"q-transition--fade"},()=>M("div",{key:"h-yr-"+B.value,class:"q-date__header-subtitle q-date__header-link "+(A.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:c.value,...h("vY",{onClick(){A.value="Years"},onKeyup(t){t.keyCode===13&&(A.value="Years")}})},[B.value]))]),M("div",{class:"q-date__header-title relative-position flex no-wrap"},[M("div",{class:"relative-position col"},[M(Oe,{name:"q-transition--fade"},()=>M("div",{key:"h-sub"+w.value,class:"q-date__header-title-label q-date__header-link "+(A.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:c.value,...h("vC",{onClick(){A.value="Calendar"},onKeyup(t){t.keyCode===13&&(A.value="Calendar")}})},[w.value]))]),e.todayBtn===!0?M(ie,{class:"q-date__header-today self-start",icon:i.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:c.value,onClick:rt}):null])])}function Pe({label:t,type:n,key:u,dir:m,goTo:f,boundaries:E,cls:S}){return[M("div",{class:"row items-center q-date__arrow"},[M(ie,{round:!0,dense:!0,size:"sm",flat:!0,icon:q.value[0],tabindex:c.value,disable:E.prev===!1,...h("go-#"+n,{onClick(){f(-1)}})})]),M("div",{class:"relative-position overflow-hidden flex flex-center"+S},[M(Oe,{name:"q-transition--jump-"+m},()=>M("div",{key:u},[M(ie,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:c.value,...h("view#"+n,{onClick:()=>{A.value=n}})})]))]),M("div",{class:"row items-center q-date__arrow"},[M(ie,{round:!0,dense:!0,size:"sm",flat:!0,icon:q.value[1],tabindex:c.value,disable:E.next===!1,...h("go+#"+n,{onClick(){f(1)}})})])]}const Nt={Calendar:()=>[M("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[M("div",{class:"q-date__navigation row items-center no-wrap"},Pe({label:O.value.months[d.value.month-1],type:"Months",key:d.value.month,dir:ne.value,goTo:st,boundaries:J.value.month,cls:" col"}).concat(Pe({label:d.value.year,type:"Years",key:d.value.year,dir:ge.value,goTo:Re,boundaries:J.value.year,cls:""}))),M("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Z.value.map(t=>M("div",{class:"q-date__calendar-item"},[M("div",t)]))),M("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[M(Oe,{name:"q-transition--slide-"+ne.value},()=>M("div",{key:Q.value,class:"q-date__calendar-days fit"},ot.value.map(t=>M("div",{class:t.classes},[t.in===!0?M(ie,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:c.value,...h("day#"+t.i,{onClick:()=>{Pt(t.i)},onMouseover:()=>{Zt(t.i)}})},t.event!==!1?()=>M("div",{class:"q-date__event bg-"+t.event}):null):M("div",""+t.i)]))))])])],Months(){const t=d.value.year===z.value.year,n=m=>R.value!==null&&d.value.year===R.value.year&&R.value.month>m||N.value!==null&&d.value.year===N.value.year&&N.value.month<m,u=O.value.monthsShort.map((m,f)=>{const E=d.value.month===f+1;return M("div",{class:"q-date__months-item flex flex-center"},[M(ie,{class:t===!0&&z.value.month===f+1?"q-date__today":null,flat:E!==!0,label:m,unelevated:E,color:E===!0?U.value:null,textColor:E===!0?re.value:null,tabindex:c.value,disable:n(f+1),...h("month#"+f,{onClick:()=>{It(f+1)}})})])});return e.yearsInMonthView===!0&&u.unshift(M("div",{class:"row no-wrap full-width"},[Pe({label:d.value.year,type:"Years",key:d.value.year,dir:ge.value,goTo:Re,boundaries:J.value.year,cls:" col"})])),M("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},u)},Years(){const t=oe.value,n=t+Me,u=[],m=f=>R.value!==null&&R.value.year>f||N.value!==null&&N.value.year<f;for(let f=t;f<=n;f++){const E=d.value.year===f;u.push(M("div",{class:"q-date__years-item flex flex-center"},[M(ie,{key:"yr"+f,class:z.value.year===f?"q-date__today":null,flat:!E,label:f,dense:!0,unelevated:E,color:E===!0?U.value:null,textColor:E===!0?re.value:null,tabindex:c.value,disable:m(f),...h("yr#"+f,{onClick:()=>{jt(f)}})})]))}return M("div",{class:"q-date__view q-date__years flex flex-center"},[M("div",{class:"col-auto"},[M(ie,{round:!0,dense:!0,flat:!0,icon:q.value[0],tabindex:c.value,disable:m(t),...h("y-",{onClick:()=>{oe.value-=Me}})})]),M("div",{class:"q-date__years-content col self-stretch row items-center"},u),M("div",{class:"col-auto"},[M(ie,{round:!0,dense:!0,flat:!0,icon:q.value[1],tabindex:c.value,disable:m(n),...h("y+",{onClick:()=>{oe.value+=Me}})})])])}};function Pt(t){const n={...d.value,day:t};if(e.range===!1){Rt(n,Q.value);return}if(P.value===null){const u=ot.value.find(f=>f.fill!==!0&&f.i===t);if(e.noUnset!==!0&&u.range!==void 0){Ne({target:n,from:u.range.from,to:u.range.to});return}if(u.selected===!0){Ne(n);return}const m=fe(n);P.value={init:n,initHash:m,final:n,finalHash:m},l("rangeStart",Se(n))}else{const u=P.value.initHash,m=fe(n),f=u<=m?{from:P.value.init,to:n}:{from:n,to:P.value.init};P.value=null,Be(u===m?n:{target:n,...f}),l("rangeEnd",{from:Se(f.from),to:Se(f.to)})}}function Zt(t){if(P.value!==null){const n={...d.value,day:t};Object.assign(P.value,{final:n,finalHash:fe(n)})}}return Object.assign(o,{setToday:rt,setView:At,offsetCalendar:Tt,setCalendarTo:je,setEditingRange:$t}),()=>{const t=[M("div",{class:"q-date__content col relative-position"},[M(Oe,{name:"q-transition--fade"},Nt[A.value])])],n=Yt(a.default);return n!==void 0&&t.push(M("div",{class:"q-date__actions"},n)),e.name!==void 0&&e.disable!==!0&&y(t,"push"),M("div",{class:we.value,...Vt.value},[Bt(),M("div",{ref:F,class:"q-date__main col column",tabindex:-1},t)])}}}),on=Ke({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:a,emit:l}){const o=Te(),i=I(null);let r=0;const h=[];function c(y){const F=typeof y=="boolean"?y:e.noErrorFocus!==!0,H=++r,O=(z,d)=>{l("validation"+(z===!0?"Success":"Error"),d)},K=z=>{const d=z.validate();return typeof d.then=="function"?d.then(A=>({valid:A,comp:z}),A=>({valid:!1,comp:z,err:A})):Promise.resolve({valid:d,comp:z})};return(e.greedy===!0?Promise.all(h.map(K)).then(z=>z.filter(d=>d.valid!==!0)):h.reduce((z,d)=>z.then(()=>K(d).then(A=>{if(A.valid===!1)return Promise.reject(A)})),Promise.resolve()).catch(z=>[z])).then(z=>{if(z===void 0||z.length===0)return H===r&&O(!0),!0;if(H===r){const{comp:d,err:A}=z[0];if(A!==void 0&&console.error(A),O(!1,d),F===!0){const se=z.find(({comp:ne})=>typeof ne.focus=="function"&&ia(ne.$)===!1);se!==void 0&&se.comp.focus()}}return!1})}function v(){r++,h.forEach(y=>{typeof y.resetValidation=="function"&&y.resetValidation()})}function _(y){y!==void 0&&vt(y);const F=r+1;c().then(H=>{F===r&&H===!0&&(e.onSubmit!==void 0?l("submit",y):y!==void 0&&y.target!==void 0&&typeof y.target.submit=="function"&&y.target.submit())})}function s(y){y!==void 0&&vt(y),l("reset"),Ae(()=>{v(),e.autofocus===!0&&e.noResetFocus!==!0&&g()})}function g(){ua(()=>{if(i.value===null)return;const y=i.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||i.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||i.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(i.value.querySelectorAll("[tabindex]"),F=>F.tabIndex>-1);y!=null&&y.focus({preventScroll:!0})})}ra(sa,{bindComponent(y){h.push(y)},unbindComponent(y){const F=h.indexOf(y);F>-1&&h.splice(F,1)}});let k=!1;return Dt(()=>{k=!0}),wt(()=>{k===!0&&e.autofocus===!0&&g()}),la(()=>{e.autofocus===!0&&g()}),Object.assign(o.proxy,{validate:c,resetValidation:v,submit:_,reset:s,focus:g,getValidationComponents:()=>h}),()=>M("form",{class:"q-form",ref:i,onSubmit:_,onReset:s},Yt(a.default))}});export{Ga as Q,Et as _,en as a,Ya as b,_a as c,pa as d,an as e,Ft as f,fe as g,on as h,nn as i,ga as j,tn as n,V as p,Ka as u};
